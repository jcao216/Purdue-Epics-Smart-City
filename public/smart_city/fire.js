
var image = "data:image/jpeg;base64,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"



var database = firebase.database();
var listReports = "did not update";
console.log(database);
removeReport("-LOsKCzLPInoj9fBx25v")

//writeNewReport(1,image,"traffic","thisisadescription", 44.7,-90.1)

console.log(readAllReports(callback1));
// console.log(snapshot.val())

//Reads All the reports on the database Expects a callback function as argument
async function readAllReports(callbackFunction){
  var reports = firebase.database().ref('reports');
  reports.once('value').then(function(snapshot) {
    //console.log(snapshot.val());
     listReports = snapshot.val();
     console.log("Reports are read")
     callbackFunction(snapshot.val());
  });
  var snapshot = await reports.once("value")
  return(snapshot.val());
}

//callback function example
function callback1(reportsObject){
console.log(reportsObject)
window.alert('Got to fire.js');
	//this generates a table that will render objects from within the reportsObject object
	document.createElement("TABLE");
document.write(reportsObject.reportsObject[0].status);
}


//Sample code for adding table elements automatically
function myFunction() {
    var x = document.createElement("TABLE");
    x.setAttribute("id", "myTable");
    document.body.appendChild(x);

    var y = document.createElement("TR");
    y.setAttribute("id", "myTr");
    document.getElementById("myTable").appendChild(y);

    var z = document.createElement("TD");
    var t = document.createTextNode("cell");
    z.appendChild(t);
    document.getElementById("myTr").appendChild(z);
}




//Creates a new report and addes it to the database
function writeNewReport(reportId, pictures, reportType, description,lat,long) {
  // A report entry.
  var postData = {
    reportId: reportId,
    reportType: reportType,
    location: [lat,long],
    description:description,
    pictures: pictures
  };

  // Get a key for a new report.
  var newPostKey = firebase.database().ref().child('reports').push().key;

  // Write the new post's data simultaneously in the posts list and the user's post list.
  var updates = {};
  updates['/reports/' + newPostKey] = postData;

  return firebase.database().ref().update(updates);
}

//Remove a key given a ReportKey
//ReportKey is the Idnetifier of every report
function removeReport(reportKey) {
  var newPostKey = firebase.database().ref().child('reports').child(reportKey).remove();
  return firebase.database().ref();
}
